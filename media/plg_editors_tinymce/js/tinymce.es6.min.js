((a,b,c,d)=>{'use strict';b.JoomlaTinyMCE={setupEditors:a=>{const c=b.getOptions?b.getOptions("plg_editor_tinymce",{}):b.optionsStorage.plg_editor_tinymce||{},e=[].slice.call((a||d).querySelectorAll(".js-editor-tinymce"));e.forEach(a=>{const d=a.querySelector("textarea");b.JoomlaTinyMCE.setupEditor(d,c)})},setupEditor:(c,e)=>{if(b.editors.instances[c.id])return;const f=c?c.getAttribute("name").replace(/\[\]|\]/g,"").split("[").pop():"default",g=e?e.tinyMCE||{}:{},h=g.default||{};let i=g[f]?g[f]:h;i=i.joomlaMergeDefaults?b.extend(b.extend({},h),i):b.extend({},i),c&&(i.selector=null,i.target=c);const j=[],k=Object.keys(i.joomlaExtButtons.names).map(a=>i.joomlaExtButtons.names[a]);k.forEach(a=>{const b={};b.text=a.name,b.icon=a.icon,b.onclick=a.href?()=>{d.getElementById(`${a.id}Modal`).open()}:()=>{new Function(a.click)()},j.push(b)}),j.length&&(i.setup=a=>{a.addButton("jxtdbuttons",{type:"menubutton",text:b.JText._("PLG_TINY_CORE_BUTTONS"),icon:"none icon-joomla",menu:j})});const l=new a.Editor(c.id,i,tinymce.EditorManager);l.render(),b.editors.instances[c.id]={getValue:()=>b.editors.instances[c.id].instance.getContent(),setValue:a=>b.editors.instances[c.id].instance.setContent(a),replaceSelection:a=>b.editors.instances[c.id].instance.execCommand("mceInsertContent",!1,a),id:c.id,instance:l,onSave:()=>(b.editors.instances[c.id].instance.isHidden()&&b.editors.instances[c.id].instance.show(),"")},d.getElementById(l.id).form.addEventListener("submit",()=>b.editors.instances[l.targetElm.id].onSave())}},d.addEventListener("DOMContentLoaded",()=>{b.JoomlaTinyMCE.setupEditors(d)}),d.addEventListener("joomla:updated",a=>b.JoomlaTinyMCE.setupEditors(a.target))})(window.tinyMCE,Joomla,window,document);