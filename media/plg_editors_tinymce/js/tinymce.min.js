(function(a,b,c,d){'use strict';b.JoomlaTinyMCE={setupEditors:function f(a){var c=b.getOptions?b.getOptions("plg_editor_tinymce",{}):b.optionsStorage.plg_editor_tinymce||{},e=[].slice.call((a||d).querySelectorAll(".js-editor-tinymce"));e.forEach(function(a){var d=a.querySelector("textarea");b.JoomlaTinyMCE.setupEditor(d,c)})},setupEditor:function m(c,e){if(!b.editors.instances[c.id]){var f=c?c.getAttribute("name").replace(/\[\]|\]/g,"").split("[").pop():"default",g=e?e.tinyMCE||{}:{},h=g.default||{},i=g[f]?g[f]:h;i=i.joomlaMergeDefaults?b.extend(b.extend({},h),i):b.extend({},i),c&&(i.selector=null,i.target=c);var j=[],k=Object.keys(i.joomlaExtButtons.names).map(function(a){return i.joomlaExtButtons.names[a]});k.forEach(function(a){var b={};b.text=a.name,b.icon=a.icon,b.onclick=a.href?function(){d.getElementById("".concat(a.id,"Modal")).open()}:function(){new Function(a.click)()},j.push(b)}),j.length&&(i.setup=function(a){a.addButton("jxtdbuttons",{type:"menubutton",text:b.JText._("PLG_TINY_CORE_BUTTONS"),icon:"none icon-joomla",menu:j})});var l=new a.Editor(c.id,i,tinymce.EditorManager);l.render(),b.editors.instances[c.id]={getValue:function a(){return b.editors.instances[c.id].instance.getContent()},setValue:function d(a){return b.editors.instances[c.id].instance.setContent(a)},replaceSelection:function d(a){return b.editors.instances[c.id].instance.execCommand("mceInsertContent",!1,a)},id:c.id,instance:l,onSave:function a(){return b.editors.instances[c.id].instance.isHidden()&&b.editors.instances[c.id].instance.show(),""}},d.getElementById(l.id).form.addEventListener("submit",function(){return b.editors.instances[l.targetElm.id].onSave()})}}},d.addEventListener("DOMContentLoaded",function(){b.JoomlaTinyMCE.setupEditors(d)}),d.addEventListener("joomla:updated",function(a){return b.JoomlaTinyMCE.setupEditors(a.target)})})(window.tinyMCE,Joomla,window,document);